{"version":3,"sources":["components/ResizeGroup/ResizeGroup.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA,6BAA+B;AAC/B,6CAGyB;AAEzB,2CAA8C;AAE9C,IAAM,YAAY,GAAG,EAAE,CAAC;AAoBxB;IAAiC,+BAAmD;IASlF,qBAAY,KAAwB;QAApC,YACE,kBAAM,KAAK,CAAC,SAMb;QALC,KAAI,CAAC,KAAK,GAAG;YACX,aAAa,EAAE,IAAI;YACnB,YAAY,EAAE,IAAI;YAClB,YAAY,eAAO,KAAI,CAAC,KAAK,CAAC,IAAI,CAAE;SACrC,CAAC;;IACJ,CAAC;IAEM,+CAAyB,GAAhC,UAAiC,SAA4B;QAC3D,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,KAAK,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC;YACvC,IAAI,CAAC,QAAQ,CAAC;gBACZ,aAAa,EAAE,IAAI;gBACnB,YAAY,EAAE,IAAI;gBAClB,YAAY,eAAO,SAAS,CAAC,IAAI,CAAE;aACpC,CAAC,CAAC;QACL,CAAC;IACH,CAAC;IAEM,uCAAiB,GAAxB;QACE,IAAI,CAAC,aAAa,EAAE,CAAC;QACrB,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,MAAM,EAAE,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,EAAE,YAAY,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;IAC3G,CAAC;IAEM,4BAAM,GAAb;QACQ,IAAA,eAAmC,EAAjC,8BAAY,EAAE,cAAI,CAAgB;QACpC,IAAA,eAA0D,EAAxD,gCAAa,EAAE,8BAAY,EAAE,8BAAY,CAAgB;QAEjE,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;YACnC,MAAM,CAAC,IAAI,CAAC;QACd,CAAC;QAED,MAAM,CAAC,CACL,6BAAK,SAAS,EAAG,eAAG,CAAC,gBAAgB,CAAC,EAAG,GAAG,EAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC;YACpE,aAAa,IAAI,CACjB,6BAAK,SAAS,EAAG,eAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAG,GAAG,EAAG,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IACvE,YAAY,CAAC,YAAY,CAAC,CACxB,CACP;YAEC,YAAY,IAAI,YAAY,CAAC,YAAY,CAAC,CACxC,CACP,CAAC;IACJ,CAAC;IAEM,wCAAkB,GAAzB,UAA0B,SAA4B;QACpD,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC;IAEO,+BAAS,GAAjB;QACE,IAAI,CAAC,QAAQ,CAAC,EAAE,aAAa,EAAE,IAAI,EAAE,CAAC,CAAC;IACzC,CAAC;IAEO,mCAAa,GAArB;QAAA,iBAiCC;QAhCO,IAAA,eAAmC,EAAjC,cAAI,EAAE,8BAAY,CAAgB;QAClC,IAAA,wCAAa,CAAgB;QAErC,EAAE,CAAC,CAAC,aAAa,IAAI,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,MAAM,KAAK,CAAC,IAAI,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;YACpF,IAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,qBAAqB,EAAE,CAAC;YACrD,IAAM,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,qBAAqB,EAAE,CAAC;YACxD,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,KAAK,GAAG,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;gBACvC,IAAI,gBAAgB,GAAG,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;gBAE7D,+EAA+E;gBAC/E,iFAAiF;gBACjF,6CAA6C;gBAC7C,EAAE,CAAC,CAAC,gBAAgB,KAAK,SAAS,CAAC,CAAC,CAAC;oBACnC,IAAI,CAAC,QAAQ,CAAC;wBACZ,YAAY,EAAE,gBAAgB;qBAC/B,CAAC,CAAC;gBACL,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,IAAI,CAAC,QAAQ,CAAC;wBACZ,aAAa,EAAE,KAAK;qBACrB,CAAC,CAAC;gBACL,CAAC;YAEH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,IAAI,CAAC,QAAQ,CAAC,UAAC,SAAS,EAAE,KAAK;oBAC7B,MAAM,CAAC;wBACL,YAAY,EAAE,SAAS,CAAC,YAAY;wBACpC,YAAY,eAAO,KAAI,CAAC,KAAK,CAAC,IAAI,CAAE;wBACpC,aAAa,EAAE,KAAK;qBACrB,CAAC;gBACJ,CAAC,CAAC,CAAC;YACL,CAAC;QACH,CAAC;IACH,CAAC;IACH,kBAAC;AAAD,CAhGA,AAgGC,CAhGgC,yBAAa;AAE9B,wBAAY,GAAG;IAC3B,IAAI,EAAE,EAAE;CACT,CAAC;AAJS,kCAAW","file":"components/ResizeGroup/ResizeGroup.js","sourcesContent":["import * as React from 'react';\r\nimport {\r\n  css,\r\n  BaseComponent\r\n} from '../../Utilities';\r\nimport { IResizeGroupProps } from './ResizeGroup.Props';\r\nimport styles = require('./ResizeGroup.scss');\r\n\r\nconst RESIZE_DELAY = 16;\r\n\r\nexport interface IResizeGroupState {\r\n\r\n  /**\r\n   * Current set of data being measured to determine fit\r\n  */\r\n  measuredData: any;\r\n\r\n  /**\r\n   * Final data used to render proper sized component\r\n  */\r\n  renderedData?: any;\r\n\r\n  /**\r\n   * A flag to determine if a new measurement should be made upon state change\r\n  */\r\n  shouldMeasure?: boolean;\r\n}\r\n\r\nexport class ResizeGroup extends BaseComponent<IResizeGroupProps, IResizeGroupState> {\r\n\r\n  public static defaultProps = {\r\n    data: {}\r\n  };\r\n\r\n  private _root: HTMLElement;\r\n  private _measured: HTMLElement;\r\n\r\n  constructor(props: IResizeGroupProps) {\r\n    super(props);\r\n    this.state = {\r\n      shouldMeasure: true,\r\n      renderedData: null,\r\n      measuredData: { ...this.props.data },\r\n    };\r\n  }\r\n\r\n  public componentWillReceiveProps(nextProps: IResizeGroupProps) {\r\n    if (this.props.data !== nextProps.data) {\r\n      this.setState({\r\n        shouldMeasure: true,\r\n        renderedData: null,\r\n        measuredData: { ...nextProps.data }\r\n      });\r\n    }\r\n  }\r\n\r\n  public componentDidMount() {\r\n    this._measureItems();\r\n    this._events.on(window, 'resize', this._async.debounce(this._onResize, RESIZE_DELAY, { leading: true }));\r\n  }\r\n\r\n  public render() {\r\n    const { onRenderData, data } = this.props;\r\n    const { shouldMeasure, renderedData, measuredData } = this.state;\r\n\r\n    if (Object.keys(data).length === 0) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <div className={ css('ms-ResizeGroup') } ref={ this._resolveRef('_root') }>\r\n        { shouldMeasure && (\r\n          <div className={ css(styles.measured) } ref={ this._resolveRef('_measured') }>\r\n            { onRenderData(measuredData) }\r\n          </div>\r\n        ) }\r\n\r\n        { renderedData && onRenderData(renderedData) }\r\n      </div>\r\n    );\r\n  }\r\n\r\n  public componentDidUpdate(prevProps: IResizeGroupProps) {\r\n    this._measureItems();\r\n  }\r\n\r\n  private _onResize() {\r\n    this.setState({ shouldMeasure: true });\r\n  }\r\n\r\n  private _measureItems() {\r\n    const { data, onReduceData } = this.props;\r\n    const { shouldMeasure } = this.state;\r\n\r\n    if (shouldMeasure && Object.keys(data).length !== 0 && this._root && this._measured) {\r\n      const container = this._root.getBoundingClientRect();\r\n      const measured = this._measured.getBoundingClientRect();\r\n      if ((measured.width > container.width)) {\r\n        let nextMeasuredData = onReduceData(this.state.measuredData);\r\n\r\n        // We don't want to get stuck in an infinite render loop when there are no more\r\n        // scaling steps, so implementations of onReduceData should return undefined when\r\n        // there are no more scaling states to apply.\r\n        if (nextMeasuredData !== undefined) {\r\n          this.setState({\r\n            measuredData: nextMeasuredData,\r\n          });\r\n        } else {\r\n          this.setState({\r\n            shouldMeasure: false\r\n          });\r\n        }\r\n\r\n      } else {\r\n        this.setState((prevState, props) => {\r\n          return {\r\n            renderedData: prevState.measuredData,\r\n            measuredData: { ...this.props.data },\r\n            shouldMeasure: false\r\n          };\r\n        });\r\n      }\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":"..\\..\\..\\src"}